<!DOCTYPE html>
<html>

	<head>

		<meta charset="utf-8" />
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
		<title>202031108010006Map</title>

		<link rel="stylesheet" href="https://js.arcgis.com/4.23/esri/themes/light/main.css">
		<link href="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/css/bootstrap.min.css" rel="stylesheet">
		<script src="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"></script>
		<script src="https://js.arcgis.com/4.23/"></script>

		<style>
			html,
			body {
				padding: 0;
				margin: 0;
				height: 100%;
				width: 100%;
				font-weight: bolder;
				border: 10px;
				border-radius: 10%;
				/* æ·»åŠ åœ†è§’è¾¹æ¡† */
				border-color: black;
			}

			#viewDiv1 {
				padding: 0;
				margin: 0;
				height: 90%;
				width: 50%;
			}

			#viewDiv2 {
				position: absolute;
				top: 110px;
				right: 0px;
				padding: 0;
				margin: 0;
				height: 90%;
				width: 50%;
			}

			#ShowInfo {
				float: left;
				position: absolute;
				bottom: 2%;
				left: 1%;
				padding: 10px 20px;
				border-style: dotted;
				border-radius: 22%;
				background-color: #d8d4d4eb;
				opacity: 0.8;
				font-family: "Comic Sans MS";
				font-size: 14px;
			}
		</style>

		<script>
			require(["esri/config",
				"esri/Map",
				"esri/views/MapView",
				"esri/layers/FeatureLayer",
				"esri/renderers/ClassBreaksRenderer",
				"esri/renderers/visualVariables/ColorVariable",
				"esri/widgets/Legend",
				"esri/Graphic",
				"esri/geometry/geometryEngine",
				"esri/layers/GeoJSONLayer"
			], function(esriConfig, Map, MapView, FLayer, ClassBreaksRenderer, ColorVariable, Legend, Graphic, geometryEngine, GeoJSONLayer) {

				esriConfig.apiKey =
					"AAPK424de85d28c844e4b1ee55c39e7cebc9x1v2-aG5JY-DK1o4R1Yin9PN5bSqv292_i3klsReMajPhWHru2FP5SzvCuD1yJS3";

				// å·¦ä¾§åº•å›¾
				const map1 = new Map({
					basemap: "arcgis-dark-gray" // Basemap layer service
				});

				// å·¦ä¾§è§†å›¾
				const view1 = new MapView({
					container: "viewDiv1", // Div element
					map: map1,
					center: [105.767614, 35.64586], // Longitude, latitude
					zoom: 3, // Zoom level 							
				});
				const geojsonlayer = new GeoJSONLayer({
				  url: "https://kexinm.github.io/mengkexin/China.json",
						title: "ä¸€å¤§æ—¶æœŸå…šå‘˜äººæ•°"
				});
				map1.add(geojsonlayer);
				
				
				//dingyi
				const less5 = {
				  type: "simple-fill", // autocasts as new SimpleFillSymbol()
				  color: "#fffcd4",
				  style: "solid",
				  outline: {
				    width: 0.2,
				    color: [255, 255, 255, 0.5]
				  }
				};
				
				const less10 = {
				  type: "simple-fill", // autocasts as new SimpleFillSymbol()
				  color: "#b1cdc2",
				  style: "solid",
				  outline: {
				    width: 0.2,
				    color: [255, 255, 255, 0.5]
				  }
				};
				
				const less15 = {
				  type: "simple-fill", // autocasts as new SimpleFillSymbol()
				  color: "#38627a",
				  style: "solid",
				  outline: {
				    width: 0.2,
				    color: [255, 255, 255, 0.5]
				  }
				};
				
				const less20 = {
				  type: "simple-fill", // autocasts as new SimpleFillSymbol()
				  color: "#0d2644",
				  style: "solid",
				  outline: {
				    width: 0.2,
				    color: [255, 255, 255, 0.5]
				  }
				};
				
				// ç¬¬äºŒæ­¥ï¼ŒæŒ‡å®šæ¸²æŸ“å™¨
				const renderer1 = {
				  type: "class-breaks", // autocasts as new ClassBreaksRenderer()
				  field: "popu", // total number
				  defaultSymbol: {
				    type: "simple-fill", // autocasts as new SimpleFillSymbol()
				    color: "black",
				    style: "backward-diagonal",
				    outline: {
				      width: 0.5,
				      color: [50, 50, 50, 0.6]
				    }
				  },
				  classBreakInfos: [
				    {
				      minValue: 0,
				      maxValue: 5,
				      symbol: less5,
				      label: "<5äºº" // label for symbol in legend
				    },
				    {
				      minValue: 5,
				      maxValue: 10,
				      symbol: less10,
				      label: "5-10äºº" // label for symbol in legend
				    },
				    {
				      minValue: 10,
				      maxValue:15,
				      symbol: less15,
				      label: "10-15äºº" // label for symbol in legend
				    },
				    {
				      minValue: 15,
				      maxValue: 20,
				      symbol: less20,
				      label: "15-20äºº" // label for symbol in legend
				    }
				  ],
				  defaultLabel: "no data" // legend label for features that don't match a class break
				};
				
						
						//view.ui.add(new Legend({ view }), "top-right");
							
						
				geojsonlayer.renderer = renderer1;
				view1.ui.add(
					new Legend({
						view: view1
					}),
					"bottom-right"
				);


				// æ˜¾ç¤ºç»çº¬åº¦åæ ‡ã€æ¯”ä¾‹å°ºå¤§å°å’Œç¼©æ”¾çº§åˆ«
				function showInformation(pt) {
					document.getElementById("coordinateDisplay").textContent = "Lat/Lon  " + pt.latitude.toFixed(3) +
						", " +
						pt.longitude.toFixed(3);
					document.getElementById("scaleDisplay").textContent = "  | Scale  1:" + Math.round(view1.scale * 1) /
						1;
					//document.getElementById("zoomDisplay").textContent = "  | Zoom  " + view1.zoom;
				}

				// è§†å›¾é™æ­¢æ—¶ï¼Œäº‹ä»¶æ˜¾ç¤ºä¸­å¿ƒçš„ä½ç½®åæ ‡
				view1.watch(["stationary"], function() {
					showInformation(view1.center);
				});

				// æ˜¾ç¤ºé¼ æ ‡ç§»åŠ¨æ—¶çš„ä½ç½®åæ ‡
				view1.on(["pointer-down", "pointer-move"], function(event) {
					showInformation(view1.toMap({
						x: event.x,
						y: event.y
					}));
				});


				// å³ä¾§åº•å›¾
				const map2 = new Map({
					basemap: "arcgis-streets-night" // Basemap layer service
				});

				// å³ä¾§è§†å›¾
				const view2 = new MapView({
					container: "viewDiv2", // Div element
					map: map2,
					center: [105.767614, 35.64586], // Longitude, latitude
					zoom: 3, // Zoom level 							
				});
				const defaultSym = {
					type: "simple-fill", // autocasts as new SimpleFillSymbol()
					outline: {
						color: [128, 128, 128, 0.2],
						width: "0.1px"
					}
				};
				const renderer = {
					type: "simple", // autocasts as new SimpleRenderer()
					symbol: defaultSym,
					visualVariables: [{
						type: "color",
						field: "popu_part",
						stops: [{
								value: 0,
								color: "#FFFCD4",
								label: "0"
				
							},
							{
								value: 900,
								color: "#350242",
								label: ">700"
				
							}
						]
					}]
				};
				
				const geojsonLayer = new GeoJSONLayer({
					url: 'data/data.json',
					title: "å…¨å›½å„çœå…šå‘˜æ•°é‡åˆ†å¸ƒå›¾",
					popupTemplate: {
						// autocasts as new PopupTemplate()
						title: "{name}",
						content: "äºŒåå¤§æ—¶æœŸå…šå‘˜äººæ•°:{popu_part}ä¸‡äºº",
				
					},
					renderer: renderer
				});
				map2.add(geojsonLayer);
				
				view2.ui.add(
					new Legend({
						view: view2
					}),
					"bottom-right"
				);

				// ä¸¤ä¾§çª—å£è”åŠ¨
				view1.on(["pointer-down", "pointer-move"], function(evt) {
					// LinkMap2();
					view2.zoom = view1.zoom;
					view2.scale = view2.scale;
					view2.center = view1.center;
				});

				view2.on(["pointer-down", "pointer-move"], function(evt) {
					view1.zoom = view2.zoom;
					view1.scale = view2.scale;
					view1.center = view2.center;
				});

				// ä¸¤ä¾§çª—å£è”åŠ¨
				view1.on(["mouse-wheel", "drag", "hold"], function(event) {
					setTimeout(function() {
						// viewpointåŒ…å«ä½†ä¸é™äºextent
						view2.viewpoint = view1.viewpoint;
					}, 70);
				});

				view2.on(["mouse-wheel", "drag", "hold"], function(event) {
					setTimeout(function() {
						// viewpointåŒ…å«ä½†ä¸é™äºextent
						view1.viewpoint = view2.viewpoint;
					}, 70);
				});

			});
		</script>

	</head>


	<body>
		<nav class="navbar navbar-expand-sm bg-light navbar-light" style="background-image: url(https://kexinm.github.io/mengkexin/background.jpg); font-style: italic;">
			<a class="navbar-brand" style="font-size: 36pt;">GISğŸŒ</a> 
			<ul class="navbar-nav">
				<li class="nav-item active">
					<a class="nav-link" href="https://kexinm.github.io/mengkexin/yida_popu.html" style="color: darkblue;font-size: 16pt;">ä¸€å¤§æ—¶æœŸå…šå‘˜æ•°é‡</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="https://kexinm.github.io/mengkexin/genjvdi.html" style="color: darkblue;font-size: 16pt;">é©å‘½æ ¹æ®åœ°è¯¦æƒ…å›¾</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="https://kexinm.github.io/mengkexin/luxian.html" style="color: darkblue;font-size: 16pt;">çº¢å†›é•¿å¾è·¯çº¿è¯¦æƒ…å›¾</a>
				</li>
				<li class="nav-item active">
					<a class="nav-link" href="https://kexinm.github.io/mengkexin/ershida.html" style="color: darkblue;font-size: 16pt;">äºŒåå¤§æ—¶æœŸå…šå‘˜æ•°é‡</a>
				</li>
				<li class="nav-item dropdown">
				  <a class="nav-link dropdown-toggle" id="navbardrop" data-bs-toggle="dropdown" style="color: #666666;font-size: 16pt;">
					å…¶ä»–
				  </a>
				  <div class="dropdown-menu">
					<a class="dropdown-item" href="https://kexinm.github.io/mengkexin/layerManager.html">å›¾å±‚ç®¡ç†</a>
					<a class="dropdown-item" href="https://kexinm.github.io/mengkexin/Compared.html">å…šå‘˜äººæ•°å¯¹æ¯”</a>
				  </div>
				</li>	
			</ul>
		</nav>

		

		<div id="viewDiv1"></div>
		<div id="viewDiv2"></div>

		<div id="ShowInfo">
			<div id="coordinateDisplay" style="display:inline"></div>
			<div id="scaleDisplay" style="display:inline"></div>
		</div>

	</body>

</html>
